module AMF.Executor.Common where

-- prelude
import           Relude

-- base
import           Data.Version                   ( Version )

-- Hackage

-- local
import           AMF.API
import           AMF.API.SystemInfo
import           AMF.Logging
import           AMF.Types.Environment
import           AMF.Types.Executor
import           AMF.Types.FileSystem

-- autogenerated
import           Paths_amf


amfVersion :: Version
amfVersion = Paths_amf.version

init :: (MonadIO m, MonadEnv m, MonadArguments m, MonadFileSystemRead m, MonadTime m) => m (RunCtx e)
init = do
    log_cfg <- newConfig newEmptyOutputs
    logger  <- newLoggingCtx log_cfg
    RunCtx <$> newSystemInfo <*> getEnvironment <*> getArgs <*> getCurrentDirectory <*> getNow <*> pure logger
